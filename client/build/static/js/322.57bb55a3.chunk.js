"use strict";(self.webpackChunksample_curd=self.webpackChunksample_curd||[]).push([[322],{322:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var a=n(1413),r=n(5861),i=n(885),o=n(4925),s=n(7757),c=n.n(s),l=n(2791),u=n(4569),d=n.n(u),p=n(4252),f=n(2833),v=n.n(f),m=n(7559),h=n.n(m),g=n(7888),x=n.n(g),y=n(4898),b=n.n(y),k=n(9932),N=n.n(k),j=n(3256),S=n.n(j),w=n(6584),C=n.n(w),T=n(368),I=n.n(T),Z=n(4292),O=n.n(Z),R=n(6705),_=n.n(R),A=n(9401),P=n.n(A),D=n(2768),E=n.n(D),H=n(8104),G=n.n(H),J=n(2071),B=n.n(J),L=n(3631),V=n.n(L),q=n(5907),z=n.n(q),F=n(5671),U=n(3144),K=n(4164),M=n(2810),Q=n(184),W=function(e){var t=e.className,n=e.text;return(0,l.useEffect)((function(){return console.log("ReactComponent mounted \u270c\ud83c\udffb")}),[]),(0,Q.jsxs)("div",{className:t,children:[(0,Q.jsx)("h3",{children:"React Component"}),n]})},X=function(){function e(t){var n=t.data,a=t.api,r=t.config;(0,F.Z)(this,e),this.api=a,this.config=r,this.data=n,this.container=void 0,this._CSS={block:this.api.styles.block,react:"react-component"},this.blockId=(0,M.Z)()}return(0,U.Z)(e,[{key:"render",value:function(){return this.container||(this.container=document.createElement("div"),this.container.classList.add(this._CSS.block),K.render((0,Q.jsx)(W,(0,a.Z)((0,a.Z)({},this.data),{},{className:this._CSS.react,blockId:this.blockId})),this.container)),this.container}},{key:"rendered",value:function(){console.log("ReactTool was rendered")}},{key:"moved",value:function(){console.log("ReactTool was moved")}},{key:"removed",value:function(){console.log("ReactTool was removed"),K.unmountComponentAtNode(this.container)}},{key:"save",value:function(e){return{text:e.innerText}}}]),e}(),Y={paragraph:{class:z(),inlineToolbar:!0,config:{placeholder:"click here to start input"}},embed:N(),table:B(),list:O(),warning:V(),code:x(),linkTool:I(),image:S(),raw:E(),quote:P(),marker:_(),checklist:h(),delimiter:b(),inlineCode:C(),simpleImage:G(),react:X},$=n(5451),ee=n.n($),te=n(9588),ne={blacklist:[],backspace:"edit",placeholder:"type something",editTags:1,dropdown:{enabled:0},callbacks:{}},ae=function(e){e.label,e.name;var t=e.value,n=void 0===t?[]:t,r=e.onChange,i=e.initialValue,o=void 0===i?[]:i,s=e.suggestions,c=void 0===s?[]:s,u=(0,l.useRef)(),d=function(e){"edit:updated"!==e.type&&"remove"!==e.type||r(e.detail.tagify.value),console.log(e.type," ==> ",e.detail.tagify.value.map((function(e){return e.value})))},p=(0,a.Z)((0,a.Z)({},ne),{},{whitelist:c,callbacks:{add:d,remove:d,blur:d,edit:d,invalid:d,click:d,focus:d,"edit:updated":d,"edit:start":d},dropdown:{position:"text",enabled:1}});return console.log("InitialValue",o),(0,Q.jsxs)("div",{className:"form-group",style:{display:"flex",justifyContent:"center"},children:[(0,Q.jsx)(ee(),{tagifyRef:u,className:"customLook",settings:p,value:n}),(0,Q.jsx)("button",{type:"button",title:"Add Tag",className:"AddTagBtn",onClick:function(e){return u.current.addEmptyTag()},children:(0,Q.jsx)(te.lO_,{className:"w-5 h-5"})})]})},re=n(6871),ie=n(577),oe=["type","onClick"],se=function(e){var t=e.type,n=e.onClick,a=(0,o.Z)(e,oe);return(0,Q.jsx)("button",{type:t,className:"m-2 py-2 px-4 border bg-neutral-100 border-neutral-300 rounded",onClick:n,children:a.children})},ce=function(){var e={},t={},n=(0,re.UO)().id,o=(0,l.useState)(""),s=(0,i.Z)(o,2);e.id=s[0],t.id=s[1];var u=(0,l.useState)([]),f=(0,i.Z)(u,2);e.tags=f[0],t.tags=f[1];var m=(0,l.useState)("No Title"),h=(0,i.Z)(m,2);e.title=h[0],t.title=h[1];var g=(0,l.useState)(""),x=(0,i.Z)(g,2);e.image=x[0],t.image=x[1];var y=(0,l.useState)(""),b=(0,i.Z)(y,2);e.category=b[0],t.category=b[1];var k=(0,l.useState)("{}"),N=(0,i.Z)(k,2);e.description=N[0],t.description=N[1];var j=(0,l.useState)(null),S=(0,i.Z)(j,2),w=S[0],C=S[1],T=(0,l.useRef)(),I=(0,l.useRef)(),Z=(0,re.s0)(),O=function(){var e=(0,r.Z)(c().mark((function e(n,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("editorChange",n,a),e.next=3,n.saver.save().then((function(e){t.description(JSON.stringify(e))})).catch((function(e){console.log("editor change error",e)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){w||R()}),[]);var R=function(){var e=(0,r.Z)(c().mark((function e(){var t,a,r,i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d().get("/api/mydata/post/"+n);case 3:o=e.sent,console.log("getdata res",o),r=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.post,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:console.log("res.description",null===(t=r)||void 0===t?void 0:t.description),s=new(v())({holder:"editorJS",autofocus:!0,tools:Y,onChange:O,data:JSON.parse((null===(a=r)||void 0===a?void 0:a.description)||"{}")}),r&&_(r),C(s);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){console.log(e),t.id(e._id||""),t.tags(e.tags||[]),t.title(e.title||""),t.image(e.image||""),t.category(e.category||""),t.description(e.description||"{}"),w&&w.blocks.render(JSON.parse(e.description||"{}"))},A=function(){var t=(0,r.Z)(c().mark((function t(n){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.id,t.prev=2,t.next=5,d().delete("/api/mydata/del/"+a,{id:a}).catch((function(e){console.log(e)}));case 5:Z("/posts",{replace:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log("Delete Handler",t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=(0,r.Z)(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),ie.Am.info("Saving ...",{position:ie.Am.POSITION.TOP_RIGHT}),t.prev=2,!e.id){t.next=9;break}return t.next=6,d().put("/api/mydata/update/"+e.id,(0,a.Z)({},e)).then((function(){ie.Am.info("Data Saved",{position:ie.Am.POSITION.TOP_RIGHT})})).catch((function(e){ie.Am.error("Data Save Error",{position:ie.Am.POSITION.TOP_RIGHT})}));case 6:t.next=11;break;case 9:return t.next=11,d().post("/api/mydata/add",(0,a.Z)({},e)).then((function(){ie.Am.info("Data Saved",{position:ie.Am.POSITION.TOP_RIGHT})})).catch((function(e){ie.Am.error("Data Save Error",{position:ie.Am.POSITION.TOP_RIGHT})}));case 11:w.destroy(),Z("/posts",{replace:!0}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}();return(0,Q.jsxs)("div",{className:"w-full m-auto",children:[(0,Q.jsxs)("div",{className:"border border-slate-400 rounded",children:[(0,Q.jsx)("input",{type:"hidden",name:"_id",value:e.id}),(0,Q.jsx)("div",{className:"relative",children:(0,Q.jsx)("div",{className:"flex items-center cursor-pointer w-fit absolute right-3 mt-[5px] z-10",children:(0,Q.jsx)(ae,{value:e.tags,tagifyRef:I,onChange:function(e){return t.tags(e)}})})}),(0,Q.jsxs)("div",{className:"h-40 relative bg-gray-100 post-banner group",children:[(0,Q.jsx)("input",{className:"hidden",ref:T,type:"file",onChange:function(e){var n=new FormData;n.append("file",e.target.files[0]),d().post("/api/images/files",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.image(e.data.path)})).catch((function(e){console.log(e)})),T.current.value=""},accept:"image/*"}),(0,Q.jsx)("div",{className:"cover",style:{backgroundImage:e.image?"url(".concat(e.image,")"):"none"}}),(0,Q.jsx)("div",{className:"cover-crtl absolute bottom-2 right-2 hidden group-hover:inline-block",children:(0,Q.jsxs)("div",{className:"flex items-center cursor-pointer w-fit  bg-gray-200 p-1 text-xs rounded",onClick:function(e){return T.current.click()},children:[(0,Q.jsx)(p.u3,{className:"w-5 h-5"}),"Replace Cover"]})})]}),(0,Q.jsx)("div",{className:"ce-block__content",children:(0,Q.jsx)("input",{type:"text",className:"outline-none p-1 font-bold text-4xl w-full",value:e.title,onChange:function(e){return t.title(e.target.value)}})}),(0,Q.jsx)("div",{id:"editorJS",className:"p-3"})]}),(0,Q.jsxs)("div",{className:"flex justify-between",children:[(0,Q.jsxs)("div",{className:"my-2",children:[(0,Q.jsx)(se,{type:"button",onClick:function(e){w.destroy(),Z(-1)},children:"Back"}),(0,Q.jsx)(se,{type:"button",onClick:P,children:"Save"}),(0,Q.jsx)(se,{type:"button",onClick:function(e){return _({})},children:"Reset"})]}),(0,Q.jsx)("div",{className:"my-2",children:(0,Q.jsx)("button",{type:"reset",className:"m-2 py-2 px-4 border bg-red-500 border-red-600 rounded text-white",onClick:A,children:"Delete"})})]})]})}}}]);
//# sourceMappingURL=322.57bb55a3.chunk.js.map